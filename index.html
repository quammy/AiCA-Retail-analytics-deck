<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AiCA Retail Analytics</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background-color: #000; overflow: hidden; font-family: 'Heebo', sans-serif; }
        #stage { width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; }
        iframe { width: 100%; height: 100%; border: none; display: none; }
        iframe.active { display: block; }

        /* Floating Logo */
        .floating-logo { position: fixed; top: 30px; right: 40px; z-index: 10000; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .floating-logo.rtl { right: auto; left: 40px; }
        .floating-logo img { height: 60px; width: auto; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5)); }

        /* Language Bar */
        .lang-bar { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 10001; display: flex; gap: 10px; background: rgba(15, 23, 42, 0.8); padding: 5px 15px; border-radius: 30px; border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); }
        .lang-btn { background: none; border: none; color: #64748b; cursor: pointer; font-weight: bold; font-size: 14px; padding: 5px 10px; transition: color 0.3s; }
        .lang-btn.active { color: #22d3ee; }

        /* Floating Controls */
        .controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 9999;
            background: rgba(15, 23, 42, 0.7);
            padding: 8px 12px;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* RTL Fix: Moves the bar to the left AND reverses the visual order of the buttons */
        .controls.rtl {
            right: auto;
            left: 30px;
            flex-direction: row-reverse;
        }

        .nav-btn { width: 36px; height: 36px; border-radius: 50%; border: 1px solid rgba(34, 211, 238, 0.4); background: rgba(34, 211, 238, 0.1); color: #22d3ee; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; transition: all 0.2s; }
        .nav-btn:hover:not(:disabled) { background: #22d3ee; color: #0f172a; }
        .nav-btn:disabled { opacity: 0.1; cursor: not-allowed; }

        .slide-info { color: white; font-size: 13px; font-weight: 600; min-width: 50px; text-align: center; letter-spacing: 1px; }
    </style>
</head>
<body>

    <div class="lang-bar">
        <button id="btn-sp" class="lang-btn active" onclick="setLanguage('sp')">ES</button>
        <span style="color:rgba(255,255,255,0.2)">|</span>
        <button id="btn-he" class="lang-btn" onclick="setLanguage('he')">HE</button>
    </div>

    <div id="logo-container" class="floating-logo">
        <a id="logo-link" href="https://www.aica44.com/es" target="_blank"><img src="logo.svg" alt="AiCA Logo"></a>
    </div>

    <div id="stage">
        <iframe id="frame-1" class="active"></iframe>
        <iframe id="frame-2"></iframe>
        <iframe id="frame-3"></iframe>
        <iframe id="frame-4"></iframe>
        <iframe id="frame-5"></iframe>
        <iframe id="frame-6"></iframe>
        <iframe id="frame-7"></iframe>
        <iframe id="frame-8"></iframe>
        <iframe id="frame-9"></iframe>
        <iframe id="frame-10"></iframe>
        <iframe id="frame-11"></iframe>
        <iframe id="frame-12"></iframe>
        <iframe id="frame-13"></iframe>
        <iframe id="frame-14"></iframe>
        <iframe id="frame-15"></iframe>
    </div>

    <div id="controls-container" class="controls">
        <button id="firstBtn" class="nav-btn" onclick="goToSlide(1)" title="Inicio">&#171;</button>
        <button id="prevBtn" class="nav-btn" onclick="changeSlide(-1)">&#10094;</button>
        <div class="slide-info"><span id="currentNum">1</span> / 15</div>
        <button id="nextBtn" class="nav-btn" onclick="changeSlide(1)">&#10095;</button>
        <button id="lastBtn" class="nav-btn" onclick="goToSlide(15)" title="Fin">&#187;</button>
    </div>

    <script>
        let currentSlide = 1;
        let currentLang = 'sp';
        const totalSlides = 15;

        function setLanguage(lang) {
            currentLang = lang;

            const logo = document.getElementById('logo-container');
            const logoLink = document.getElementById('logo-link');
            const controls = document.getElementById('controls-container');

            // Update logo link based on language
            if (lang === 'he') {
                logoLink.href = 'https://www.aica44.com';
            } else {
                logoLink.href = 'https://www.aica44.com/es';
            }

            document.getElementById('btn-sp').classList.toggle('active', lang === 'sp');
            document.getElementById('btn-he').classList.toggle('active', lang === 'he');

            if (lang === 'he') {
                logo.classList.add('rtl');
                controls.classList.add('rtl');
                // Adjusting button symbols for RTL logic
                document.getElementById('firstBtn').innerHTML = "&#187;"; // Flip icons
                document.getElementById('lastBtn').innerHTML = "&#171;";
                document.getElementById('prevBtn').innerHTML = "&#10095;";
                document.getElementById('nextBtn').innerHTML = "&#10094;";
            } else {
                logo.classList.remove('rtl');
                controls.classList.remove('rtl');
                // Standard LTR icons
                document.getElementById('firstBtn').innerHTML = "&#171;";
                document.getElementById('lastBtn').innerHTML = "&#187;";
                document.getElementById('prevBtn').innerHTML = "&#10094;";
                document.getElementById('nextBtn').innerHTML = "&#10095;";
            }

            for (let i = 1; i <= totalSlides; i++) {
                const frame = document.getElementById(`frame-${i}`);
                frame.src = `s${i} ${lang}.html`;
            }
        }

        function changeSlide(direction) {
            // In RTL, the physical buttons on the left go "Forward"
            // but the logic remains index-based.
            goToSlide(currentSlide + direction);
        }

        function goToSlide(index) {
            if (index >= 1 && index <= totalSlides) {
                document.getElementById(`frame-${currentSlide}`).classList.remove('active');
                document.getElementById(`frame-${index}`).classList.add('active');
                currentSlide = index;
                updateUI();
            }
        }

        function updateUI() {
            const isFirst = (currentSlide === 1);
            const isLast = (currentSlide === totalSlides);
            document.getElementById('prevBtn').disabled = document.getElementById('firstBtn').disabled = isFirst;
            document.getElementById('nextBtn').disabled = document.getElementById('lastBtn').disabled = isLast;
            document.getElementById('currentNum').innerText = currentSlide;
        }

        setLanguage('sp');

        document.addEventListener('keydown', (e) => {
            if (e.key === "ArrowRight") changeSlide(currentLang === 'he' ? -1 : 1);
            if (e.key === "ArrowLeft") changeSlide(currentLang === 'he' ? 1 : -1);
            if (e.key === "Home") goToSlide(1);
            if (e.key === "End") goToSlide(totalSlides);
        });
    </script>
</body>
</html>